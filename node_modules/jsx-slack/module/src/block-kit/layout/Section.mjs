import{JSXSlackError as a}from"../../error.mjs";import{JSXSlack as _}from"../../jsx.mjs";import{createComponent as y}from"../../jsx-internals.mjs";import{Escape as w}from"../../mrkdwn/jsx.mjs";import{mrkdwn as b}from"../composition/Mrkdwn.mjs";import{Button as v}from"../elements/Button.mjs";import{Select as j}from"../elements/Select.mjs";import{assignMetaFrom as $,alias as S,resolveTagName as d}from"../utils.mjs";import{generateInputValidator as h}from"./utils.mjs";const g=Symbol("jsx-slack-field"),m={button:()=>{},channels_select:t=>{if(t.response_url_enabled)throw new a("<ChannelsSelect responseUrlEnabled> is available only in the usage of input components.",t)},checkboxes:()=>{},conversations_select:t=>{if(t.response_url_enabled)throw new a("<ConversationsSelect responseUrlEnabled> is available only in the usage of input components.",t)},datepicker:()=>{},external_select:()=>{},image:({type:t,image_url:c,alt_text:p})=>({type:t,image_url:c,alt_text:p}),multi_channels_select:()=>{},multi_conversations_select:()=>{},multi_external_select:()=>{},multi_static_select:()=>{},multi_users_select:()=>{},overflow:()=>{},radio_buttons:()=>{},static_select:()=>{},timepicker:()=>{},users_select:()=>{},input:h("Section")},E=Object.keys(m),C=y("Field",({children:t})=>Object.defineProperty(b(t),g,{value:!0})),A=y("Section",({blockId:t,children:c,id:p,...k})=>{let l,r,n;const x=_.Children.toArray(c).reduce((o,e)=>{if(_.isValidElement(e)){const{type:i}=e.$$jsxslack,f=e.$$jsxslack.props||{};if(i==="img")return r=$(e,{type:"image",image_url:f.src,alt_text:f.alt}),o;if(i==="button")return r=S(e,v),o;if(i==="select")return r=S(e,j),o;if(typeof i!="string"&&typeof e=="object"){const s=e;if(s[g])n=[...n||[],s];else if(s.type==="mrkdwn"&&s.text)l=s;else if(m[s.type])r=m[s.type](s)||s;else{if(i===w)return[...o,e];{const u=d(e);throw new a(`<Section> has detected the unexpected component as an accessory${u?`: ${u}`:"."}`,e)}}return o}}return[...o,e]},[]);if(!l){const o=b(x);o.text&&(l=o)}if(n&&n.length>10)throw new a(`<Section> can contain up to 10 fields, but there are ${n.length} fields.`,k.__source);return{type:"section",block_id:t||p,text:l,accessory:r,fields:n}});export{C as Field,A as Section,E as availableSectionAccessoryTypes};
