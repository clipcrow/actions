import{JSXSlack as u}from"../../jsx.mjs";import{createComponent as k,cleanMeta as g,createElementInternal as S}from"../../jsx-internals.mjs";import{plainText as o}from"../composition/utils.mjs";import{Select as p}from"../elements/Select.mjs";import{Textarea as x}from"../input/Textarea.mjs";import{Divider as C}from"../layout/Divider.mjs";import{Header as _}from"../layout/Header.mjs";import{Image as I}from"../layout/Image.mjs";import{Input as f,knownInputs as h}from"../layout/Input.mjs";import{Section as O}from"../layout/Section.mjs";import{generateBlocksContainer as P,generateActionsValidator as T,generateSectionValidator as j}from"./utils.mjs";const w=P({name:"Modal",availableBlockTypes:{actions:T(),context:!0,divider:!0,header:!0,image:!0,input:!0,section:j()},aliases:{header:_,hr:C,img:I,input:f,section:O,select:p,textarea:x},typesToCheckMissingLabel:h}),B=o("Submit"),V=k("Modal",t=>{let l=!1,n,e;const y=u.Children.toArray(t.children).reduce((r,a)=>{if(u.isValidElement(a)){const{type:s,props:i}=a.$$jsxslack;if(s===f||s==="input"){if(i.type==="hidden")return e=e||{},e[i.name]=i.value,r;if(i.type==="submit")return n=o(i.value),r;l=!0}}return typeof a=="object"?(a.type==="input"&&(l=!0),[...r,a]):r},[]);!n&&l&&(n=B);const b=(()=>typeof t.privateMetadata=="string"?t.privateMetadata:typeof t.privateMetadata=="function"?t.privateMetadata(e):e&&JSON.stringify(e))(),m=t.type||"modal",v={title:o(t.title||""),submit:t.submit?o(t.submit):n,close:t.close?o(t.close):void 0,clear_on_close:t.clearOnClose!==void 0?!!t.clearOnClose:void 0,notify_on_close:t.notifyOnClose!==void 0?!!t.notifyOnClose:void 0,external_id:t.externalId},M={submit_disabled:t.submit!==void 0?!t.submit:void 0},c={callback_id:t.callbackId,private_metadata:b},d=g(S(w,{children:y}));return m==="modal"?{type:m,...c,...v,blocks:d}:{type:m,...c,...M,blocks:d}});export{V as Modal};
