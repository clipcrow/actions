import{JSXSlackError as u}from"../../error.mjs";import{createComponent as s,isValidElementFromComponent as _,createElementInternal as h}from"../../jsx-internals.mjs";import{coerceToInteger as g}from"../../utils.mjs";import{plainText as v}from"../composition/utils.mjs";import{wrapInInput as S}from"../layout/Input.mjs";import{SelectFragmentInternal as r,selectFragmentSelectedOptionsSymbol as I}from"../other/SelectFragment.mjs";import{focusOnLoadFromProps as m}from"./utils.mjs";const i=s("Select",t=>{const e=(()=>_(t.children,r)?t.children:h(r,{from:i,children:t.children}))();if(e.options&&e.options.length===0)throw new u("<Select> must contain least of one <Option> or <Optgroup>.",t.__source);const o=t.value===void 0?e[I]||[]:(a=>{const d=e.options||[].concat(...e.option_groups.map(n=>n.options)),f=[].concat(a);return d.filter(n=>f.includes(n.value))})(t.value),c=t.actionId||t.name,l=t.placeholder!==void 0?v(t.placeholder):void 0;return S(t.multiple?{type:"multi_static_select",action_id:c,placeholder:l,...e,initial_options:o.length>0?o:void 0,max_selected_items:g(t.maxSelectedItems),confirm:t.confirm,focus_on_load:m(t)}:{type:"static_select",action_id:c,placeholder:l,...e,initial_option:o.length>0?o[o.length-1]:void 0,confirm:t.confirm,focus_on_load:m(t)},t,i)});export{i as Select};
